<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Weirdness of This - Suparth Narayan Ghimire</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../suparthghimire.html"><strong aria-hidden="true">1.</strong> Suparth Narayan Ghimire</a></li><li class="chapter-item expanded affix "><li class="part-title">JavaScript Blogs</li><li class="chapter-item expanded "><a href="../blogs/This.html" class="active"><strong aria-hidden="true">2.</strong> Weirdness of This</a></li><li class="chapter-item expanded "><a href="../blogs/Functional_Programming.html"><strong aria-hidden="true">3.</strong> Weird usage of Functions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Suparth Narayan Ghimire</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="what-is-this-in-javascript"><a class="header" href="#what-is-this-in-javascript">What is This? (in JavaScript)</a></h1>
<p>We all developers have atleast once in our lifetime encountered the <code>this</code> keyword in most Programming Languages (<code>self</code> if you are from <code>Python</code> island). The implementation of <code>this</code> varies somewhat in all these languages, but it is not as confusing as it is in JavaScript.</p>
<h1 id="detour-to-c"><a class="header" href="#detour-to-c">Detour to C++</a></h1>
<p>Before starting, lets see another famous programming language that utilizes the <code>this</code> keyword, <code>C++</code>.</p>
<p><em>The example here is true for most other languages as well</em></p>
<p>I think the implementation of <code>this</code> in <code>C++</code> is as straight forward as it gets. It represents the current instance of the Class.
<br>
Let's See an Example</p>
<pre><code class="language-cpp">#include&lt;iostream&gt;
class Person{
public:
    std::string name;
    Person(std::string name){
        this-&gt;name = name;
    }
};
int main(){
    Person p = Person(&quot;Suparth&quot;);
    std::cout &lt;&lt; p.name;
    return 0;
}
</code></pre>
<p>Here, we see that parameters in the constructor function have same name as the public variable names in the class. However, <code>this</code> makes it clear on which variable is the value being assigned to. Here <code>this</code> refers to the instance of the class.</p>
<pre><code class="language-cpp">this-&gt;name = name;
</code></pre>
<p>It means the value of variable <code>name</code> from parameter is being assigned to the variable <code>name</code> from the class instance.
<br>
Thus, while logging the value of <code>name</code> from object <code>p</code>, we get Suparth in terminal.</p>
<p>Doesn't Seem Complex does it? Well, buckle up, as we gear towards the island of <code>JavaScript</code> where everything is weird. Specially <code>This</code>!</p>
<h1 id="welcome-to-javascript"><a class="header" href="#welcome-to-javascript">Welcome to JavaScript</a></h1>
<p><code>JavaScript</code>'s <code>this</code> has the same heart as other programming languages. It too refers to the current instance. But, the catch here is <strong>WHAT IN HELL DOES CURRENT INSTANCE MEAN?</strong></p>
<h2 id="current-instance--scope"><a class="header" href="#current-instance--scope">Current Instance / Scope</a></h2>
<p>JavaScript (by default) is a globally scoped language. It means you dont need to create any extra scope to execute code like in C++ or Java where you require a <code>main</code> method. Here you can execute code from first line itself. It is similar to Python in this regard. To achieve this, JavaScript has scopes/contexts where everything is executed.</p>
<p>Scopes in JavaScript:</p>
<ul>
<li>Global Scope</li>
<li>Function Scope</li>
<li>Block Scope</li>
</ul>
<p>We wont be going in what these scopes mean, as they are entirely different topic. Let's focus on <code>this</code> for now.</p>
<p><em>Some extra topics that you can learn that are based around Scopes in JavaScript</em></p>
<ul>
<li><em>Hoisting</em></li>
<li><em>Closures</em></li>
</ul>
<h1 id="this-in-javascript"><a class="header" href="#this-in-javascript">This in JavaScript</a></h1>
<p><code>this</code> refers to different things in JavaScript.</p>
<p>The basic gist of <code>this</code> in JavaScript is that <code>this</code> refers to the object of whatever scope is wrapping it. If the object of scope is not found, it refers to the parent's scope's object.</p>
<p>Confused? Let me elaborate.</p>
<p>We see that <code>window</code> is an object in JavaScript which is the object that represents the global scope. Block scope doesn't have any object that represents to it. Hence, if <code>this</code> is referred inside a simple block scope (within curly braces), it still refers to the window object as there is no other object for it to bind itself to.</p>
<p>By {}, I mean simple lexical scoping or using if statements, loops etc.</p>
<h2 id="this-refering-to-global-object"><a class="header" href="#this-refering-to-global-object">This Refering to Global Object</a></h2>
<ul>
<li>Global Scope</li>
</ul>
<pre><code class="language-js">console.log(this);
</code></pre>
<ul>
<li>Block Scope</li>
</ul>
<pre><code class="language-js">if (true) {
  console.log(this);
}
</code></pre>
<ul>
<li>Function Scope</li>
</ul>
<pre><code class="language-js">function fn() {
  console.log(this);
}
fn();
</code></pre>
<ul>
<li>Inside an Object</li>
</ul>
<pre><code class="language-js">let obj = {
  thisKey: this,
};
console.log(obj.thisKey);
</code></pre>
<p>All these examples will print the window object in console.</p>
<p>Everything here has been explained by the paragraph above, except for last two examples of function and the object. The obvious question here is doesn't function have its own scope? And why does <code>this</code> not bind to Object?</p>
<p><strong>Function:</strong>
JavaScript functions are weird as well as magical. We can not only treat them as normal subroutines by simply calling them, but also as constructors by invoking them using the new keyword! Here, <code>function fn</code> has just been called like a normal subroutine. Thus, no constructor is created which does not create a function scope, but creates a local scope. And since no object corresponds to local scope, it looks at the parent scope of the function which is global scope. Since the corresponding object of global scope is window, <code>this</code> inside a function invoked by a simple function call refers to the global scope or window object.</p>
<p><strong>Object:</strong>
The answer to Object's example simple. Creating new object does not create any new scope, as <code>obj</code> is simply a variable (even though it uses curly braces). Thus, it refers to the global scope/window object as <code>obj</code> is created inside global scope.</p>
<h1 id="the-prototype-carnival"><a class="header" href="#the-prototype-carnival">The Prototype Carnival</a></h1>
<p>Before moving forward, we must be familiar with prototypes and prototipal inheritance. I wont go much in detail, but here is a small brief.</p>
<p>Everything in JavaScript is an Object. If we see the prototype chain of anything in JavaScript, we see it is same as <code>Object.Prototype</code>. The Prototype of Object is null. Hence, in the top level of hierarchy, we see object being present.</p>
<p>This means function is an object too. If you run following code:</p>
<pre><code class="language-js">Function.prototype.__proto__ === Object.prototype;
</code></pre>
<p>We get true as the result.</p>
<hr />
<h2 id="this-refering-to-certain-object"><a class="header" href="#this-refering-to-certain-object">This Refering to Certain Object</a></h2>
<ul>
<li>Functions as Constructors</li>
</ul>
<pre><code class="language-js">function ConstructorFunction() {
  console.log(this);
}
const newInvoker = new ConstructorFunction();
</code></pre>
<p>What is new Here?</p>
<p>We see that the first distinction from normal function call is we invoke the <code>ConstructorFunction</code> function using <code>new</code> Keyword. This now creates a function scope within the global scope. When a function scope is created, the corresponding object is Function itself (function is an Object in JavaScript - discussed above). Hence, the <code>this</code> keyword will now refrence the function itself.</p>
<p>A more sophisticated example</p>
<pre><code class="language-js">function Game(initialScore) {
  this.score = initialScore;
  this.increaseScore = () =&gt; {
    this.score++;
  };
  this.decreaseScore = () =&gt; {
    this.score++;
  };
}

const newGame = new Game(0);
console.log(newGame.score);
newGame.increaseScore();
console.log(newGame.score);
</code></pre>
<p>The Output is:</p>
<pre><code class="language-console">0
</code></pre>
<pre><code class="language-console">1
</code></pre>
<ul>
<li>Arrow Functions</li>
</ul>
<pre><code class="language-js">const arrFunction = () =&gt; {
  console.log(this);
};
const arrFnNewInvoke = new arrFunction();
</code></pre>
<p>This will result in an error that says <code>arrFunction is not a constructor</code>.</p>
<p>Can you say why?</p>
<p>Arrow functions are not meant to be declared as constructors. Thus, they cannot be invoked using new keyword. Which means <code>this</code> keyword inside arrow functions will always point to the wrapper around the arrow function. In this case, it is the global scope/window object.</p>
<hr />
<ul>
<li>Function as Method inside an Object</li>
</ul>
<pre><code class="language-js">let obj = {
    name:&quot;Suparth&quot;
    getName:function(){
        console.log(this)
    }
}
obj.getName();
</code></pre>
<p>Remember while discussing the global scope of <code>this</code> keyword, we said that in normal function call, <code>this</code> points to global object as the wrapper of the function itself is the global context? Well here the wrapper is the object <code>obj</code>. What do you think will <code>this</code> point to in this case?</p>
<p>You might think that as <code>getName</code> function is wrapped by an object <code>obj</code>, <code>this</code> should point to global/window because Object doesnot create any scoping, which results in <code>this</code> pointing to window itself.</p>
<p>The answer however is far more complex than that. Let's elaborate how objects are created in JavaScript.</p>
<pre><code class="language-js">let obj = new Object();
obj.name = &quot;Suparth&quot;;
obj.getName = function () {
  console.log(this);
};
obj.getName();
</code></pre>
<p>Current block of code, and the one before this results in same behavior. The only difference is how we define objects, lattar one being a longer way to do so.</p>
<p>Do you see what we did here though? Do you remember we invoking a function using new keyword? Yes!!! This is same as invoking a function as a constructor. This is possible because <code>Function</code> is an <code>Object</code> in JavaScript.</p>
<p>Then what will <code>this</code> inside a constructor function point to? Yup. The constructor function itself! Hence the output here of <code>obj.getName()</code> will print the object <code>obj</code> itself.</p>
<ul>
<li>Arrow Function as Object Method</li>
</ul>
<pre><code class="language-js">let obj = {
    name:&quot;Suparth&quot;
    getName:()=&gt;{
        console.log(this);
    }
}
</code></pre>
<p>What will <code>this</code> point to in this case?</p>
<p>If you say window object, you are absolutely correct. As arrow functions cannot act as constructor function, it wont bind to the object <code>obj</code>, but to the global scope/window object.</p>
<h1 id="classes---new-kids-on-the-block"><a class="header" href="#classes---new-kids-on-the-block">Classes - New Kids on the Block</a></h1>
<p>Es6 was an interesting transition from Es5 in JavaScript island. Many new cool kids were added in the island who brought much needded changes that made the language much more redable and accessible. We all know the introduction of <code>Promises</code> and <code>async/await</code>, where <code>async/await</code> were the hot cakes. But well, classes were added too! So? How does <code>this</code> work in Classes? Well, how it always has! Let me explain.</p>
<p>You see classes in JavaScript is same thing as creating functions and invoking them as constructors using the <code>new</code> keyword. It just is a syntatic sugar similar to <code>async/await</code>.
Thus, whatever we discussed before that includes <code>Function</code>, the concept here holds true.</p>
<pre><code class="language-js">class Person {
  constructor(p_name) {
    this.name = p_name;
  }
  getName() {
    console.log(this);
  }
}
const P = new Person(&quot;Suparth&quot;);
</code></pre>
<p>Well, you see the similarity? Calling function as a constructor is same as creating a class! It just is an declarative way to do so. This made JavaScript more closer to other Object Oriented Languages and made <code>inheritance</code> similar to other langauges as <code>prototypes</code> seemed weird before.</p>
<pre><code class="language-js">class Game {
  constructor(initialScore) {
    this.score = initialScore;
  }
  increaseScore() {
    this.score++;
  }
  decreaseScore() {
    this.score++;
  }
}
const newGame = new Game(0);
console.log(newGame.score);
newGame.increaseScore();
console.log(newGame.score);
</code></pre>
<p>Remember this Example from above? Well this is how we would do it using ES6 way. This proves that classes are nothing but a syntatic sugar to create more redable constructor functions.</p>
<p>Not Convinced? Well, run this code:</p>
<pre><code class="language-js">class DemoClass {}
console.log(typeof DemoClass);
</code></pre>
<p>The Output will be</p>
<pre><code>&quot;function&quot;
</code></pre>
<p>Thus, nothing changes while using <code>this</code> keyword inside classes in JavaScript.</p>
<h1 id="leaving-javascript"><a class="header" href="#leaving-javascript">Leaving JavaScript</a></h1>
<p>That is all I have in store for today. <code>this</code> isn't over by the way! <code>this</code> has alot more to be explored upon. Did you know, you could modify behavior of <code>this</code> in JavaScript? Well, stay tuned for more blogs, as more of <code>this</code> is yet to be discussed.</p>
<p>Adios</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../suparthghimire.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../blogs/Functional_Programming.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../suparthghimire.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../blogs/Functional_Programming.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
